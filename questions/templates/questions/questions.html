<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Editor</title>
    <style type="text/css" media="screen">
        #editor {
            border: 1px solid lightgray;
            margin: auto;
            height: 500px;
            width: 80%;
        }
        textarea {
            border: 1px solid lightgray;
            margin: -300px;
            height: 500px;
            width: 100%;
        }
    </style>
</head>
<body>
 <form action="" method="post">
    {% csrf_token %}
    <textarea name="my-python-editor" data-editor="python" rows="15" >{{ c }}</textarea>
     <input type="submit"/>
 </form>
 <div>
     {% for o in outputs %}
        {{ o.decode | safe }}
     <br>
     {% endfor %}
 </div>
  <div>
     {% for e in errors %}
        {{ e.decode | safe }}
     <br>
     {% endfor %}
 </div>

<script src="{% static 'src-noconflict/ace.js' %}" type="text/javascript" charset="utf-8"></script>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(function () {
        $('textarea[data-editor]').each(function () {
            var textarea = $(this);

            var mode = textarea.data('editor');

            var editDiv = $('<div>', {
                position: 'absolute',
                width: textarea.width(),
                height: textarea.height(),
                'class': textarea.attr('class')
            }).insertBefore(textarea);

            textarea.css('visibility', 'hidden');

            var editor = ace.edit(editDiv[0]);
            editor.renderer.setShowGutter(true);
            editor.getSession().setValue(textarea.val());
            editor.getSession().setMode("ace/mode/" + mode);
            editor.setTheme("ace/theme/idle_fingers");

            // copy back to textarea on form submit...
            textarea.closest('form').submit(function () {
                textarea.val(editor.getSession().getValue());
            })

        });
    });
</script>

</body>
</html>
